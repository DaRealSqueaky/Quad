const moment = require("moment");

const debug = process.argv.includes("--debug");
const hasColor = !process.argv.includes("--no-color");

let reset = "";
if (hasColor) {
    reset = "\x1b[0m";
}

module.exports = (text, severity = 1) => {
    if (!debug && severity < 1) return;

    let color = "";
    if (hasColor) {
        switch (severity) {
            case 2:
                color = "\x1b[32m";
                break;
            case 3:
                color = "\x1b[33m";
                break;
            case 4:
                color = "\x1b[31m";
        }
    }
    let time = moment().format("kk:mm:ss");

    for (let line of text.split("\n")) {
        console.log(`${color}[${time}] ${line}${reset}`);
    }
}

module.exports.debug = 0;
module.exports.info = 1
module.exports.success = 2;
module.exports.warn = 3;
module.exports.error = 4;
