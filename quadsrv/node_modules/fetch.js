const fetch = require("node-fetch");

class Fetch {
    static reqRaw(url, options) {
        return fetch(url, options);
    }
    
    static async req(user, url, options) {
        let headers = options.headers;
        if (!headers) headers = {};
        headers["Authorization"] = `Bearer ${user.access}`;
        options.headers = headers;
        
        let result = await fetch(`https://discordapp.com/api/${url}`, options);
        if (!result.ok) {
            throw new Error("Unauthorized");
        }
        result = await result.json();
        return result;
    }
}

module.exports = Fetch;